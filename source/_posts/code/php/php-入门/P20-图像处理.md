---
title: 'PHP[å…¥é—¨]P20-å›¾åƒå¤„ç†'
date: '2017-01-01T09:01:20+08:00'
tags:
    - php
categories:
    - php

---



> è¿™æ˜¯æˆ‘æ—©æœŸçš„ php å­¦ä¹ ç¬”è®°ï¼Œphp çš„å­¦ä¹ ç‰ˆæœ¬ç‰ˆæœ¬æ˜¯ 5.6ã€7ï¼ŒğŸŸ2020/05/06å¹´ä»æœ‰é“ç¬”è®°å¯¼å‡ºè‡³æ­¤ã€‚


å›¾åƒå¤„ç†

å‡†å¤‡å·¥ä½œï¼š

MIMEï¼šäº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹

æœåŠ¡å™¨ä¼šå‘Šè¯‰æµè§ˆå™¨å½“å‰è¿”å›çš„æ–‡ä»¶ç±»å‹ï¼Œå½“æµè§ˆå™¨è·å–åˆ°content-typeæ–‡ä»¶ç±»å‹
å°±ä¼šè‡ªåŠ¨æŒ‰ç…§ç±»å‹æ‰“å¼€æ–‡ä»¶

header(\'location:\');

header(\'content-type:text/css\');

å¸¸è§çš„mimeç±»å‹ï¼š

HTML JavaScript css

image/png image/jpeg image/gif

å›¾åƒåç¼€ï¼š

png jpg jpeg gif bmp wbmp

æ‰“å¼€æ”¯æŒçš„ç›¸å¯¹åº”çš„æ‰©å±•åº“php.ini

ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š

æ‰©å±•åº“æ‰€åœ¨çš„ç›®å½•ï¼šextension\_dir =\"E:/wamp64/bin/php/php7.0.0/ext/\"

1.å¦‚æœæ˜¯wampsever : åœ¨å°ç»¿é‚£-\>php-\>php extension
å‰è¾¹æœ‰å¯¹å‹¾çš„å°±æ˜¯æ”¯æŒçš„ï¼Œ

ç›´æ¥é€‰æ‹© ä¹‹åä¼šè‡ªåŠ¨é‡å¯

2.ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼šeg:æ‰“å¼€gd2æ‰©å±•åº“

extension=php\_gd2.dll å°†åˆ†å·å»æ‰ ï¼ŒåŠ ä¸Šåˆ†å¥½å°±æ˜¯æ³¨é‡Šæ‰

å¦‚æœè¿˜æ˜¯æ²¡æœ‰æ”¯æŒç›¸å¯¹åº”çš„æ‰©å±•ï¼š

å»æ‰©å±•åº“æ–‡ä»¶ç›®å½•ï¼Œæ‰¾å¯¹åº”.dllæ–‡ä»¶
å¦‚æœæ²¡æœ‰å»å®˜ç½‘ä¸‹è½½æˆ–è€…æ‹·è´åˆ«çš„åœ°æ–¹çš„.dll

\-\--

GDåº“å¤„ç†å›¾åƒï¼š

ç»å¸¸çš„ä½¿ç”¨çš„åœºæ™¯:

éªŒè¯ç  æ°´å° ç¼©æ”¾ æ•°æ®å›¾ \.....

å…­è„‰ç¥å‰‘ï¼š

1.åˆ›å»ºç”»å¸ƒ

imagecreatetruecolor()

2.å‡†å¤‡é¢œè‰²

imagecolorallocate()

3.å›¾åƒçš„å¤„ç†

imagefill

4.è®¾ç½®header å¤´

header(\'content-type:image/png\');

5.ä¿å­˜/å‘é€å›¾åƒ

imagepng()

6.å…³é—­/é‡Šæ”¾èµ„æº

imagedestroy(\$img);

\-\-\-\-\-\-\-\-\-\--

å‡½æ•°ï¼š

imagecreateï¼šåˆ›å»ºç”»å¸ƒ æ¨èä½¿ç”¨

imagecreatetruecolor(width, height); è¿”å›å€¼ èµ„æº

\--ä½¿ç”¨å›¾ç‰‡

imagecreatefromjpeg(\'meinv.jpg\');

imagecreatefrompng();

imagecreatefromgif();

å‡†å¤‡é¢œè‰²

imagecolorallocate()

å¡«å……èƒŒæ™¯é¢œè‰²

imagefill()

imagefilledarc(\$img, 100, 100, 100, 100, 0, 360, \$color3,
IMG\_ARC\_PIE);//å¡«å……çš„æ˜¯åœ†

imagefilledarc(\$img, 300, 200, 80, 100, 50, 180,
\$color3,IMG\_ARC\_CHORD); å¼§åº¦å˜æˆç›´çº¿é“¾æ¥ (å‡ºæ¥çš„æ˜¯ä¸ªä¸‰è§’å½¢)

ä¿å­˜å›¾åƒ

imagepng(\$img, \[path/filename\]);

imagegif()

imagejpeg()

å›¾åƒå¤„ç†ï¼š

imagesetpixel(\$img, 100, 100, \$color3); ç”»ä¸€ä¸ªå•ä¸€åƒç´ ç‚¹

imageline(\$img, 0, 0, 500, 400, \$color1); ç”»ä¸€æ¡çº¿

// imagerectangle(\$img, 100, 100, 200, 300, \$color1);//ç”»ä¸€ä¸ªçŸ©å½¢
ä¸¤ç‚¹å¯ä»¥ç¡®å®šä¸€ä¸ªçŸ©å½¢

imagefilledrectangle(\$img, 100, 100, 200, 300, \$color1);

// imagepolygon(\$img, \[300, 100, 320, 150, 200, 200, 100, 200 \], 4,
\$color3); å¤šè¾¹å½¢

imagefilledpolygon(\$img, \[300, 100, 320, 150, 200, 200, 100, 200 \],
4, \$color3);

\--

å­—ç¬¦ï¼š

imagechar(\$img, 5, 400, 50, \'A\', \$color3);æ°´å¹³çš„ç”»ä¸€ä¸ªå­—ç¬¦

imagechar(\$img, 5, 400, 50, \'A\', \$color3);

imagestring(\$img, 5, 400, 100, \'ABCD\', \$color3);//æ°´å¹³çš„ç”»ä¸€è¡Œå­—ç¬¦
(ä¸èƒ½æ˜¯ä¸­æ–‡)

imagefttext(\$img, 50,10, 100, 100, \$color1, \'STXINGKA.ttf\',
\'æ˜å¤©å°±æ˜¯æƒ…äººèŠ‚\');//
èµ„æºï¼Œå­—ä½“çš„å¤§å°ï¼Œå€¾æ–œçš„è§’åº¦ï¼Œå¼€å§‹çš„ä½ç½®ï¼Œcolor,ttf, stringï¼Œ

\-\-\-\--è·å–æŒ‡å®šå›¾ç‰‡çš„å®½ é«˜

getimagesize(\'å›¾ç‰‡å\'); è¿”å›å€¼æ˜¯æ•°ç»„ ä¸‹æ ‡0 çš„æ˜¯å®½ï¼Œ1çš„æ˜¯é«˜

list(\$width, \$height) = getimagesize(\'filename\');

imagecopymerge(\$img, \$imgto, 100, 100, 0, 0, 100, 100,
30);//æ‹·è´å›¾åƒä¸­çš„ä¸€éƒ¨åˆ†ï¼Œè®¾ç½®é€æ˜ç¨‹åº¦

å‚æ•°ï¼šä½œä¸ºç”»å¸ƒçš„åŸå§‹å›¾ï¼Œæ‹·è´çš„å›¾ï¼Œèµ·å§‹ä½ç½®ï¼Œ æ‹·è´å›¾çš„èµ·å§‹ä½ç½®ï¼Œ
æ‹·è´å›¾åƒçš„å®½,é«˜ï¼Œ0-100é€æ˜ç¨‹åº¦

imagecopy(\$img, \$imgto, 100, 100, 0, 0, 100, 100);

\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\--

éªŒè¯ç æ€è·¯ï¼š

1.åˆ›å»ºç”»å¸ƒæŒ‡å®šå®½å’Œé«˜(å†™æˆä¸€å‡½æ•°ï¼Œä¼ å®½è·Ÿé«˜);

2.éšæœºäº§ç”Ÿçš„å­—ç¬¦ä¸²

3.ç”»å¸ƒéšæœºå¡«å……æµ…è‰²çš„èƒŒæ™¯

4.ç”»å¸ƒä¸Šå¢åŠ ä¸Šå¹²æ‰°å…ƒç´ ï¼ˆéšæœºäº§ç”Ÿç‚¹ï¼Œçº¿ï¼Œå¼§çº¿çš„ä½ç½®ï¼Œéšæœºçš„æ˜¯äº§ç”Ÿå…ƒç´ çš„ä½ç½®ï¼‰

5.æŠŠéªŒè¯ç å­—ç¬¦ä¸²å†™ä¸Š

6.è®¾ç½®headerå¤´

7.å‘é€

8.é”€æ¯èµ„æº
