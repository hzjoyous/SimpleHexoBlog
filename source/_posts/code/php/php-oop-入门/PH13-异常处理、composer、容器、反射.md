---
title: 'PHP[OOPå…¥é—¨]PH13-å¼‚å¸¸å¤„ç†ã€composerã€å®¹å™¨ã€åå°„'
date: '2017-01-01T09:02:13+08:00'
tags:
    - php
categories:
    - php

---



> è¯¥éƒ¨åˆ†ä¸º php é¢å‘å¯¹è±¡çš„å…¥é—¨éƒ¨åˆ†ï¼Œè¾ƒä¸ºè‚¤æµ…ä¸”å‚æ‚è¿‡åˆ†å·²ç»ä¸æ˜¯ä¸»æµçš„çŸ¥è¯†ã€‚

> è¿™æ˜¯æˆ‘æ—©æœŸçš„ php å­¦ä¹ ç¬”è®°ï¼Œphp çš„å­¦ä¹ ç‰ˆæœ¬ç‰ˆæœ¬æ˜¯ 5.6ã€7ï¼ŒðŸŸ2020/05/06å¹´ä»Žæœ‰é“ç¬”è®°å¯¼å‡ºè‡³æ­¤ã€‚


day13-å¼‚å¸¸å¤„ç†ã€composerã€å®¹å™¨ã€åå°„

1ã€å¼‚å¸¸å¤„ç†

åšä¸¤æ‰‹å‡†å¤‡ï¼ˆplanA planBï¼‰

ç”Ÿæ´»ä¸­

ä»£ç ä¸­

æ­£å¸¸çš„é€»è¾‘ï¼Œä»£ç ä¼šæŒ‰ç…§ä½ å†™çš„é¡ºåºæ­£å¸¸çš„å¾€ä¸‹æ‰§è¡Œï¼Œåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€ä¼šæœ‰ä¸€äº›å¼‚å¸¸çš„æƒ…å†µï¼Œç¢°åˆ°å¼‚å¸¸çš„æƒ…å†µï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•åº”å¯¹å‘¢ï¼Œè¿™å°±æ˜¯å¼‚å¸¸å¤„ç†

åœ¨phpä¸­ï¼štry catch
Exception(å¼‚å¸¸ç±»ï¼Œæ‰€æœ‰å¼‚å¸¸å¤„ç†ç±»çš„åŸºç±»)ï¼Œåœ¨ä»£ç ä¸­å¦‚æžœæœ‰å¼‚å¸¸äº†ï¼Œæˆ‘ä»¬è¦æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸

try:å°è¯•ç€åŽ»æ‰§è¡Œä¸€äº›æœ‰å¼‚å¸¸æƒ…å†µçš„ä»£ç ï¼Œå¦‚æžœå‡ºçŽ°å¼‚å¸¸ï¼Œæ‰‹åŠ¨æŠ›å‡º

throw:æŠ›å‡ºå¼‚å¸¸

catch:æ•èŽ·å¼‚å¸¸ï¼Œè¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†

ã€æ³¨ã€‘try-catchæ˜¯ä¸€ç§ç»“æž„ï¼Œä¸€ä¸ªtryè‡³å°‘å¯¹åº”ä¸€ä¸ªcatch

ã€æ³¨ã€‘åœ¨tryå’Œcatchä¹‹é—´ä¸èƒ½æœ‰ä»»ä½•çš„ä»£ç 

try {

} catch () {

}

æ‰§è¡Œæµç¨‹ï¼š

ç¨‹åºé¦–å…ˆæ‰§è¡Œtryä¸­çš„ä»£ç ï¼Œå¦‚æžœç¢°åˆ°äº†throwï¼Œé‚£ä¹ˆtryé‡Œé¢çš„throwä¸‹é¢çš„ä»£ç å°†ä¸å†æ‰§è¡Œï¼Œç›´æŽ¥è¢«catchæ•èŽ·åˆ°è¿™ä¸ªå¼‚å¸¸ï¼Œåœ¨catchä¸­å†æ‰§è¡Œä½ æƒ³æ‰§è¡Œçš„æµç¨‹

Exceptionï¼šå®˜æ–¹çš„å¼‚å¸¸å¤„ç†ç±»ï¼Œæ˜¯æ‰€æœ‰å¼‚å¸¸ç±»çš„åŸºç±»

æž„é€ æ–¹æ³•ï¼šé”™è¯¯ä¿¡æ¯ï¼Œé”™è¯¯ä»£ç 

getMessage

getCode

è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†ç±»:ä¸€å®šè¦ç»§æ‰¿è‡ªå®˜æ–¹å¼‚å¸¸å¤„ç†ç±»

final:

ç±»ï¼šä»£è¡¨æ­¤ç±»ä¸èƒ½è¢«ç»§æ‰¿

æ–¹æ³•ï¼šä»£è¡¨è¿™ä¸ªæ–¹æ³•ä¸èƒ½è¢«é‡å†™

å¤šä¸ªæ•èŽ·

ã€æ³¨ã€‘å¦‚æžœæ˜¯å¤šä¸ªæ•èŽ·ï¼Œé‚£ä¹ˆè‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†æ•èŽ·è¦æ”¾åˆ°å®˜æ–¹æ•èŽ·çš„ä¸Šé¢

åµŒå¥—

è§ä»£ç 

è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å‡½æ•°

set\_exception\_handler(\'exceptionHandle\');

æ³¨å†Œä¸€ä¸ªå‡½æ•°ç”¨æ¥å¤„ç†å¼‚å¸¸ä¿¡æ¯

2ã€composer

æ‰“å¼€opensslæ‰©å±•

å¦‚æžœå®‰è£…æˆåŠŸï¼Œåœ¨cmdä¸‹è¾“å…¥composerï¼Œæ•²å›žè½¦ï¼Œæ˜¾ç¤ºå‡ºæ¥å³å®‰è£…æˆåŠŸ

åŸºæœ¬dosæŒ‡ä»¤

cd æ‹–è¿‡æ¥ä½ çš„é‚£ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹

dir æ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤¹ä¸‹é¢æ‰€æœ‰çš„æ–‡ä»¶

composer.jsonæ–‡ä»¶

ç¼–å†™è¯¥æ–‡ä»¶,è¿™ä¸ªæ–‡ä»¶å°±æ˜¯ä½ çš„composerçš„é…ç½®æ–‡ä»¶ï¼Œä½ æƒ³å®‰è£…çš„ä¸€äº›åŒ…çš„ä¿¡æ¯éƒ½è¦å†™åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œè€Œä¸”æŒ‰ç…§å›ºå®šçš„æ ¼å¼å†™ï¼ˆjsonæ ¼å¼ï¼‰

{

\"employees\": \[

{ \"firstName\":\"Bill\" , \"lastName\":\"Gates\" },

{ \"firstName\":\"George\" , \"lastName\":\"Bush\" },

{ \"firstName\":\"Thomas\" , \"lastName\":\"Carter\" }

\]

}

jsonæ ¼å¼ï¼šä¸¤ç§æ•°æ®ç±»åž‹ å¯¹è±¡{} æ•°ç»„\[\]
é”®ä½¿ç”¨åŒå¼•å·å¼•èµ·æ¥ï¼Œé”®å€¼å¯¹ä¸­é—´ä½¿ç”¨é€—å·éš”å¼€

ä¿®æ”¹ä¸ºå›½å†…é•œåƒç½‘

github.com

packagist.org

https://pkg.phpcomposer.com/ å›½å†…é•œåƒ

åªè¦ä½ å®‰è£…äº†composerï¼Œé»˜è®¤æ˜¯ä»Žå›½å¤–é•œåƒä¸‹è½½ï¼Œä½ å¾—ä¿®æ”¹æˆå›½å†…é•œåƒï¼Œå¦åˆ™åŽæžœè‡ªè´Ÿ

æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼Œä¿®æ”¹é•œåƒæº

composer config -g repo.packagist composer
https://packagist.phpcomposer.com

requireåŠ è½½è·¯ç”±åŒ…

\"require\": {

\"noahbuscher/macaw\": \"dev-master\"

}

è¿è¡Œcomposer updateæŒ‡ä»¤è¿›è¡Œä¸‹è½½

ç‰ˆæœ¬å·

1.0.\* è¡¨ç¤ºä»»ä½•ä»Ž 1.0 å¼€å§‹çš„å¼€å‘åˆ†æ”¯ï¼Œå®ƒå°†ä¼šåŒ¹é… 1.0.0ã€1.0.2 æˆ–è€…
1.0.20

1.0.2 å¯¹åº”ç¡®å®šçš„ç‰ˆæœ¬å·

\>=1.0

\>=1.0,\<2.0

\>=1.0,\<1.1\|\>=1.2

\~1.2 ç›¸å½“äºŽ \>=1.2,\<2.0

\~1.2.3 ç›¸å½“äºŽ \>=1.2.3,\<1.3

dev-master githubä¸Šé¢çš„ä¸»ç‰ˆæœ¬å·

å‚æ•°

é¡¹ç›®åŸºæœ¬æè¿°

\"name\": \"laravel/laravel\",

\"description\": \"The Laravel Framework.\",

\"keywords\": \[\"framework\", \"laravel\"\],

\"license\": \"MIT\",

\"type\": \"project\",

autoload(é‡ç‚¹)

é€šè¿‡composerå®‰è£…çš„åŒ…ï¼Œcomposeréƒ½å·²ç»ä¸ºæˆ‘ä»¬å®žçŽ°äº†è‡ªåŠ¨åŠ è½½ï¼Œä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æŽ¥ä½¿ç”¨å³å¯

ã€æ³¨ã€‘ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…ä¹‹å‰ï¼Œè¦é¦–å…ˆåŒ…å«

include \'vendor/autoload.php\';

å¦‚æžœæ˜¯è‡ªå·±å†™çš„ç±»ï¼Œæƒ³ç”¨é€šè¿‡è‡ªåŠ¨åŠ è½½åŠ è½½è¿‡æ¥ï¼Œéœ€è¦ä½¿ç”¨ä¸‹é¢ä¸¤ç§æ–¹æ³•ä¸­çš„ä»»æ„ä¸€ç§

psr-4 ï¼šéµä»Žpsr-4çš„è§„èŒƒè¿›è¡ŒåŠ è½½

classmapï¼šæ–‡ä»¶å¤¹æ˜ å°„ï¼Œå°†è¯¥æ–‡ä»¶å¤¹ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶åŒ…å«è¿›æ¥

ã€æ³¨ã€‘ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶ä¸­çš„autoloadå‚æ•°ä¹‹åŽï¼Œè¦é¦–å…ˆæ‰§è¡Œ composer
dump-autoload

composerå¸¸ç”¨æŒ‡ä»¤

é€šè¿‡composer listæ¥å±•ç¤ºæ‰€æœ‰çš„æŒ‡ä»¤

require å®‰è£…åŒ…æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥è¿›è¡ŒåŠ è½½ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡ä»¤æ¨¡å¼è¿›è¡ŒåŠ è½½

composer require noahbuscher/macaw:dev-master

3ã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ã€åè½¬æŽ§åˆ¶ï¼ˆIOCï¼‰ã€å®¹å™¨

å®¹å™¨ä¼˜ç‚¹ï¼š

1ã€é™ä½Žè€¦åˆåº¦

2ã€å®žçŽ°æƒ°æ€§åŠ è½½

3ã€ä¾¿äºŽç®¡ç†

4ã€åå°„

ReflectionClass åå°„ç±»å¯¹è±¡

ReflectionMethod åå°„æ–¹æ³•å¯¹è±¡

ReflectionParameters åå°„å‚æ•°å¯¹è±¡

5ã€è™šæ‹Ÿä¸»æœº

httpd.conf

vhost\_alias\_module

rewrite\_module

Include conf/extra/httpd-vhosts.conf
