---
title: 'PHP[OOPå…¥é—¨]PH06-æ•°æ®åº“æ“ä½œç±»'
date: '2017-01-01T09:02:06+08:00'
tags:
    - php
categories:
    - php

---



> è¯¥éƒ¨åˆ†ä¸º php é¢å‘å¯¹è±¡çš„å…¥é—¨éƒ¨åˆ†ï¼Œè¾ƒä¸ºè‚¤æµ…ä¸”å‚æ‚è¿‡åˆ†å·²ç»ä¸æ˜¯ä¸»æµçš„çŸ¥è¯†ã€‚

> è¿™æ˜¯æˆ‘æ—©æœŸçš„ php å­¦ä¹ ç¬”è®°ï¼Œphp çš„å­¦ä¹ ç‰ˆæœ¬ç‰ˆæœ¬æ˜¯ 5.6ã€7ï¼ŒğŸŸ2020/05/06å¹´ä»æœ‰é“ç¬”è®°å¯¼å‡ºè‡³æ­¤ã€‚


day06-æ•°æ®åº“æ“ä½œç±»

1ã€æ•°æ®åº“çŸ¥è¯†å›é¡¾

è¿æ¥æ•°æ®åº“

mysqli\_connect(ä¸»æœºåï¼Œç”¨æˆ·åï¼Œå¯†ç )

åˆ¤æ–­æ˜¯å¦æˆåŠŸ

é€‰æ‹©æ•°æ®åº“

mysqli\_select\_db(\$link, åº“å)

è®¾ç½®å­—ç¬¦é›†

mysqli\_set\_charset(\$link, å­—ç¬¦é›†)

å‡†å¤‡sql

æ‰§è¡Œ

mysqli\_query(\$link, \$sql)

è§£æç»“æœé›†

mysqli\_fetch\_assoc(\$result)

mysqli\_fetch\_rows(\$result)

mysqli\_affected\_rows(\$link)

mysqli\_fetch\_array(\$result)

mysqli\_insert\_id(\$link)

å…³é—­

mysqli\_close(\$link)

2ã€è¿è´¯æ“ä½œ

\$user-\>where()-\>table()-\>field()-\>limit()-\>order()-\>select();

return \$this;

3ã€æ•°æ®åº“ç¼“å­˜å­—æ®µ

å°†è¡¨æ ¼ä¸­çš„å…¨éƒ¨å­—æ®µç¼“å­˜èµ·æ¥

ï¼ˆ1ï¼‰å½“æŸ¥è¯¢çš„æ—¶å€™ï¼Œå¦‚æœä¸ä¼ é€’å­—æ®µï¼Œé»˜è®¤ä½¿ç”¨å…¨éƒ¨å­—æ®µï¼ˆç¼“å­˜ï¼‰è¿›è¡ŒæŸ¥è¯¢

ï¼ˆ2ï¼‰å½“åœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå­—æ®µè¾“å…¥é”™è¯¯äº†ï¼Œä¸å½±å“æˆ‘çš„æŸ¥è¯¢

username password createIp createTime å’Œç¼“å­˜å­—æ®µå–äº¤é›†æŸ¥è¯¢

ï¼ˆ3ï¼‰å½“æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå­—æ®µé”®å€¼å¯¹ä¼ é€’é”™è¯¯ï¼Œä¸å½±å“æ’å…¥æ•°æ®

4ã€\_\_call(\$name, \$args)å‡½æ•°

getByUsername getByEmail

5ã€ä¸¤ç§æ“ä½œ

å¢åˆ æ”¹æŸ¥

å¢åˆ æ”¹ï¼ˆè¿”å›çš„ç»“æœéƒ½æ˜¯å—å½±å“çš„è¡Œæ•°ï¼‰ exec

æŸ¥ï¼ˆè¿”å›çš„æ˜¯ç»“æœé›†ï¼‰ query

6ã€æŸ¥è¯¢å®ç°å­—æ®µæ— é¡ºåºæ›¿æ¢

\$user-\>where()-\>table()-\>field()-\>limit()-\>order()-\>select();

\$user-\>table()-\>limit()-\>where()-\>field()-\>order()-\>select();

7ã€æ•°ç»„äº¤é›†

array\_intersect

æŒ‰å€¼å–äº¤é›†ï¼Œå†…å®¹ä¸ºç¬¬ä¸€ä¸ªæ•°ç»„çš„å†…å®¹

array\_intersect\_key

æŒ‰é”®å–äº¤é›†ï¼Œå†…å®¹ä¸ºç¬¬ä¸€ä¸ªæ•°ç»„çš„å†…å®¹

8ã€ç±»çš„è®¾è®¡

Modelç±»

æˆ‘ä»¬å†™çš„æ˜¯ä¸€ä¸ªçˆ¶ç±»ï¼ŒåŸºç±»

ä»¥åæˆ‘ä»¬çš„ä¸€å¼ è¡¨æ ¼å°±æ˜¯ä¸€ä¸ªç±»ï¼Œè€Œä¸”éƒ½è¦ç»§æ‰¿è‡ªModelç±»

user==ã€‹UserModel goods==\>GoodsModel arctical==\>AbcModel

æˆå‘˜å±æ€§

\$host

\$user

\$pwd

\$charset

\$dbname

\$link //ä¿å­˜æ•°æ®åº“èµ„æº

\$sql //ä¿å­˜sqlè¯­å¥ä½¿ç”¨

\$options = \[\]; //ç”¨æ¥ä¿å­˜å…¶å®ƒæ–¹æ³•ï¼ˆlimitã€whereï¼‰ä¼ é€’è¿‡æ¥çš„å‚æ•°

\$tableName //è®¾ç½®è¡¨çš„åå­—ï¼Œä»ç±»åä¸­è·å–

æˆå‘˜æ–¹æ³•

select table filed where limit order group having

\$sql = \'select %field% from %table% %where% %group% %having% %order%
%limit%\';
